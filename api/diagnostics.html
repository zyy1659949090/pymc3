
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Diagnostics &#8212; PyMC3 3.2 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Backends" href="backends.html" />
    <link rel="prev" title="Stats" href="stats.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-pymc3.diagnostics">
<span id="diagnostics"></span><h1>Diagnostics<a class="headerlink" href="#module-pymc3.diagnostics" title="Permalink to this headline">¶</a></h1>
<p>Convergence diagnostics and model validation</p>
<dl class="function">
<dt id="pymc3.diagnostics.geweke">
<code class="descclassname">pymc3.diagnostics.</code><code class="descname">geweke</code><span class="sig-paren">(</span><em>pymc3_obj</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.diagnostics.geweke" title="Permalink to this definition">¶</a></dt>
<dd><p>Return z-scores for convergence diagnostics.</p>
<p>Compare the mean of the first % of series with the mean of the last % of
series. x is divided into a number of segments for which this difference is
computed. If the series is converged, this score should oscillate between
-1 and 1.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>array-like</em>) – The trace of some stochastic parameter.</li>
<li><strong>first</strong> (<em>float</em>) – The fraction of series at the beginning of the trace.</li>
<li><strong>last</strong> (<em>float</em>) – The fraction of series at the end to be compared with the section
at the beginning.</li>
<li><strong>intervals</strong> (<em>int</em>) – The number of segments.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>scores</strong> (<em>list [[]]</em>) – Return a list of [i, score], where i is the starting index for each
interval and score the Geweke score on the interval.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The Geweke score on some series x is computed by:</p>
<blockquote>
<div><div class="math">
\[\frac{E[x_s] - E[x_e]}{\sqrt{V[x_s] + V[x_e]}}\]</div>
</div></blockquote>
<p>where <span class="math">\(E\)</span> stands for the mean, <span class="math">\(V\)</span> the variance,
<span class="math">\(x_s\)</span> a section at the start of the series and
<span class="math">\(x_e\)</span> a section at the end of the series.</p>
<p class="rubric">References</p>
<p>Geweke (1992)</p>
</dd></dl>

<dl class="function">
<dt id="pymc3.diagnostics.gelman_rubin">
<code class="descclassname">pymc3.diagnostics.</code><code class="descname">gelman_rubin</code><span class="sig-paren">(</span><em>mtrace</em>, <em>varnames=None</em>, <em>include_transformed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.diagnostics.gelman_rubin" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns estimate of R for a set of traces.</p>
<p>The Gelman-Rubin diagnostic tests for lack of convergence by comparing
the variance between multiple chains to the variance within each chain.
If convergence has been achieved, the between-chain and within-chain
variances should be identical. To be most effective in detecting evidence
for nonconvergence, each chain should have been initialized to starting
values that are dispersed relative to the target distribution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mtrace</strong> (<em>MultiTrace</em><em> or </em><em>trace object</em>) – A MultiTrace object containing parallel traces (minimum 2)
of one or more stochastic parameters.</li>
<li><strong>varnames</strong> (<em>list</em>) – Names of variables to include in the rhat report</li>
<li><strong>include_transformed</strong> (<em>bool</em>) – Flag for reporting automatically transformed variables in addition
to original variables (defaults to False).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Rhat</strong> (<em>dict of floats (MultiTrace) or float (trace object)</em>) – Returns dictionary of the potential scale reduction
factors, <span class="math">\(\hat{R}\)</span></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The diagnostic is computed by:</p>
<blockquote>
<div><div class="math">
\[\hat{R} = \frac{\hat{V}}{W}\]</div>
</div></blockquote>
<p>where <span class="math">\(W\)</span> is the within-chain variance and <span class="math">\(\hat{V}\)</span> is
the posterior variance estimate for the pooled traces. This is the
potential scale reduction factor, which converges to unity when each
of the traces is a sample from the target posterior. Values greater
than one indicate that one or more chains have not yet converged.</p>
<p class="rubric">References</p>
<p>Brooks and Gelman (1998)
Gelman and Rubin (1992)</p>
</dd></dl>

<dl class="function">
<dt id="pymc3.diagnostics.effective_n">
<code class="descclassname">pymc3.diagnostics.</code><code class="descname">effective_n</code><span class="sig-paren">(</span><em>mtrace</em>, <em>varnames=None</em>, <em>include_transformed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.diagnostics.effective_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns estimate of the effective sample size of a set of traces.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mtrace</strong> (<em>MultiTrace</em><em> or </em><em>trace object</em>) – A MultiTrace object containing parallel traces (minimum 2)
of one or more stochastic parameters.</li>
<li><strong>varnames</strong> (<em>list</em>) – Names of variables to include in the effective_n report</li>
<li><strong>include_transformed</strong> (<em>bool</em>) – Flag for reporting automatically transformed variables in addition
to original variables (defaults to False).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>n_eff</strong> (<em>dictionary of floats (MultiTrace) or float (trace object)</em>) – Return the effective sample size, <span class="math">\(\hat{n}_{eff}\)</span></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The diagnostic is computed by:</p>
<div class="math">
\[\hat{n}_{eff} = \frac{mn}{1 + 2 \sum_{t=1}^T \hat{\rho}_t}\]</div>
<p>where <span class="math">\(\hat{\rho}_t\)</span> is the estimated autocorrelation at lag t, and T
is the first odd positive integer for which the sum
<span class="math">\(\hat{\rho}_{T+1} + \hat{\rho}_{T+1}\)</span> is negative.</p>
<p class="rubric">References</p>
<p>Gelman et al. (2014)</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/pymc3_logo.jpg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">PyMC3</a></h1>



<p class="blurb">Probabilistic Programming in Python: Bayesian Modeling and Probabilistic Machine Learning with Theano</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prob_dists.html">Probability Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="distributions.html">Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="bounds.html">Bounded Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="inference.html">Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="glm.html">Generalized Linear Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="gp.html">GP Implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="gp.html#mean-functions">Mean Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="gp.html#covariance-functions">Covariance Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="plots.html">Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats.html">Stats</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="backends.html">Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">Math</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html">Data</a></li>
</ul>
</li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, The PyMC Development Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/api/diagnostics.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>